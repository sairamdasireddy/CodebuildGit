 version: 0.2

env:

  parameter-store:
    DOCKER_REGISTRY_USERNAME: /myapp/docker-credentials/username
    DOCKER_REGISTRY_PASSWORD: /myapp/docker-credentials/password
    DOCKER_REGISTRY_URL: /myapp/docker-registry/url	


phases:
  install:
    runtime-versions:
       python: 3.11
    
  pre_build:
   commands:
      - pip install -r buildprocess.yml
  build:
    commands:
     - cd buildprocess.yml
      - echo " Build the image "
      - docker build -t "$DOCKER_REGISTRY_URL/$DOCKER_REGISTRY_USERNAME/Samplepythonapp:latest"
      - docker push "$DOCKER_REGISTRY_URL/$DOCKER_REGISTRY_USERNAME/Samplepythonapp:latest" 
  post_build:
    commands:
      - echo "Build is successful "